import{c as j,q as v,u as w,r,m as g,t as p,j as e,X as y,e as N,v as S,L as M,w as A,x as k}from"./main-Be0VJ4Hp.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],E=j("calendar",z),F=s=>{const{user:u,isAuthenticated:o}=v(),{t:n}=w(),[b,a]=r.useState(!1),[m,i]=r.useState(!1),[c,d]=r.useState(!1);r.useEffect(()=>{o&&s&&x();const t=localStorage.getItem("pending_follow_author");o&&t&&t===s&&(h(),localStorage.removeItem("pending_follow_author"))},[o,s]);const x=async()=>{try{const t=localStorage.getItem("accessToken");if(t){const l=await g.checkFollowStatus(s,t);a(l)}}catch(t){console.error(t)}},h=async()=>{if(!o){localStorage.setItem("pending_follow_author",s),d(!0);return}i(!0);try{const t=localStorage.getItem("accessToken");if(!t)throw new Error("No token");b?(await g.unfollowAuthor(s,t),a(!1),p.success(n("author.unfollowed","Deixou de seguir este autor"))):(await g.followAuthor(s,t),a(!0),p.success(n("author.followed","Agora está a seguir este autor!")))}catch{p.error(n("author.error","Erro ao atualizar estado de seguir"))}finally{i(!1)}};return{isFollowing:b,loading:m,handleFollow:h,isAuthModalOpen:c,closeAuthModal:()=>d(!1),onAuthSuccess:()=>{d(!1)}}},_=({isOpen:s,onClose:u,onSuccess:o,intentText:n})=>{const{t:b}=w(),[a,m]=r.useState(""),[i,c]=r.useState("idle"),[d,x]=r.useState("");if(!s)return null;const h=async l=>{l.preventDefault(),c("sending"),x("");try{await k.requestMagicLink(a),c("sent")}catch{c("error"),x("Erro ao enviar link. Tente novamente.")}},t=async l=>{try{await k.loginSocial(l,"mock_token"),o(),u()}catch(f){console.error(f)}};return e.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-950/60 backdrop-blur-sm",onClick:u}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-[32px] shadow-2xl relative z-10 overflow-hidden border border-slate-100 dark:border-slate-800 animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-50 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/30",children:[e.jsx("h3",{className:"font-black text-slate-900 dark:text-white uppercase tracking-tight text-xs flex items-center gap-2",children:"Entrar / Registar"}),e.jsx("button",{onClick:u,className:"p-2 text-slate-400 hover:text-red-500 transition-colors rounded-full hover:bg-red-50 dark:hover:bg-red-900/10 active:scale-95",title:"Fechar",children:e.jsx(y,{size:18})})]}),e.jsxs("div",{className:"p-6",children:[n&&e.jsx("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-2xl border border-blue-100 dark:border-blue-800/30",children:e.jsx("p",{className:"text-xs font-bold text-center text-brand-blue dark:text-blue-400 leading-relaxed",children:n})}),i==="sent"?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-in zoom-in",children:e.jsx(N,{size:32})}),e.jsx("h4",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Verifique o seu Email"}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-6",children:["Enviamos um link mágico de acesso para ",e.jsx("strong",{children:a}),". Clique no link para entrar instantaneamente."]}),e.jsx("button",{onClick:()=>c("idle"),className:"text-xs font-bold text-brand-blue hover:underline",children:"Usar outro email"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{onClick:()=>t("google"),className:"w-full flex items-center justify-center gap-3 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-all group",children:[e.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-200 group-hover:text-slate-900 dark:group-hover:text-white",children:"Continuar com Google"})]}),e.jsxs("button",{onClick:()=>t("apple"),className:"w-full flex items-center justify-center gap-3 py-3 bg-black text-white rounded-xl hover:bg-slate-900 transition-all group",children:[e.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.74 1.18 0 2.21-.84 3.67-.84 1.54.12 2.7.75 3.37 1.48-3.06 1.78-2.5 5.51.5 6.78-.92 2.67-2.17 4.55-2.62 4.81zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.16 2.39-2.02 4.47-3.74 4.25z"})}),e.jsx("span",{className:"text-xs font-bold text-white/90 group-hover:text-white",children:"Continuar com Apple"})]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-100 dark:border-slate-800"})}),e.jsx("div",{className:"relative flex justify-center text-[10px] uppercase font-bold text-slate-400",children:e.jsx("span",{className:"bg-white dark:bg-slate-900 px-2 tracking-widest",children:"Ou email"})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"sr-only",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:e.jsx(S,{size:16})}),e.jsx("input",{type:"email",required:!0,placeholder:"seu@email.com",value:a,onChange:l=>m(l.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all"})]})]}),d&&e.jsx("p",{className:"text-[10px] text-red-500 font-bold",children:d}),e.jsx("button",{type:"submit",disabled:i==="sending",className:"w-full flex items-center justify-center gap-2 py-3 bg-brand-blue text-white rounded-xl font-black text-xs uppercase tracking-widest hover:bg-brand-dark transition-all shadow-lg shadow-blue-500/20 disabled:opacity-70 disabled:cursor-not-allowed",children:i==="sending"?e.jsx(M,{size:16,className:"animate-spin"}):e.jsxs(e.Fragment,{children:["Receber Link Mágico ",e.jsx(A,{size:14})]})})]})]})]})]})]})};export{_ as A,E as C,F as u};
