import{c as f,a as g,N as j,r,t as l,j as e,L as w,Q as N,h as v,U as y}from"./main-CzhJzhiQ.js";import{l as i,I as M,C as z}from"./libraryService-dxfTx-mO.js";import{A as C}from"./arrow-left-Gqm3HES9.js";import{D}from"./download-Dp0jPFV8.js";import{M as _}from"./map-pin-Ps9BEFVs.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],A=f("building",P),B=()=>{var n;const{slug:s}=g(),c=j(),[t,x]=r.useState(null),[b,d]=r.useState(!0);r.useEffect(()=>{s&&(p(),i.recordView(s))},[s]);const p=async()=>{d(!0);try{if(s){const a=await i.getPublication(s);x(a)}}catch(a){console.error("Error fetching publication:",a),l.error("Erro ao carregar publicação.")}finally{d(!1)}},h=()=>{var o;if(!t)return;const u=`${t.authors.map(k=>k.name).join(", ")} (${t.year}). ${t.title}. ${((o=t.institution)==null?void 0:o.name)||""}. DOI: ${t.doi_internal}`;navigator.clipboard.writeText(u),l.success("Citação APA copiada!")},m=async()=>{if(t)try{const{download_url:a}=await i.recordDownload(t.slug);window.open(a,"_blank")}catch(a){console.error("Download error:",a),l.error("Erro ao processar download.")}};return b?e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx(w,{className:"w-12 h-12 text-brand-blue animate-spin mb-4"}),e.jsx("p",{className:"text-slate-400 font-black text-xs uppercase tracking-widest animate-pulse",children:"A abrir documento..."})]}):t?e.jsx("div",{className:"min-h-screen bg-slate-50/50 dark:bg-slate-950 pb-24 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-24 pb-12",children:[e.jsxs("button",{onClick:()=>c("/biblioteca"),className:"flex items-center gap-2 text-slate-500 hover:text-brand-blue transition-colors font-black text-[10px] uppercase tracking-widest mb-12",children:[e.jsx(C,{size:14})," Voltar à Biblioteca"]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsxs("div",{className:"flex-grow space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"px-3 py-1 bg-brand-blue/10 text-brand-blue rounded-full text-[10px] font-black uppercase tracking-widest border border-brand-blue/20",children:t.type}),t.is_verified&&e.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-full text-[10px] font-black uppercase tracking-widest border border-emerald-100 dark:border-emerald-900/30",children:[e.jsx(z,{size:12})," Verificado"]}),e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[t.year," • ",t.language]})]}),e.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 dark:text-white leading-tight tracking-tight",children:t.title})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 dark:border-slate-800 pb-2",children:"Resumo Académico"}),e.jsx("p",{className:"text-lg text-slate-700 dark:text-slate-300 font-serif leading-relaxed text-justify",children:t.abstract})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map(a=>e.jsxs("span",{className:"px-4 py-2 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 text-slate-600 dark:text-slate-400 rounded-xl text-[10px] font-bold",children:["#",a]},a))}),e.jsxs("div",{className:"bg-slate-200 dark:bg-slate-800 rounded-[32px] overflow-hidden aspect-[4/5] md:aspect-video shadow-2xl relative group border-4 border-white dark:border-slate-900",children:[e.jsx("iframe",{src:`${t.pdf_file}#toolbar=0`,className:"w-full h-full",title:t.title}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950/20 to-transparent pointer-events-none"})]})]}),e.jsx("aside",{className:"lg:w-96 shrink-0 space-y-8",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[32px] p-8 shadow-xl border border-slate-100 dark:border-slate-800 space-y-6 sticky top-32",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center gap-3 py-5 bg-brand-blue text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-brand-dark transition-all shadow-xl shadow-blue-500/20 active:scale-95",children:[e.jsx(D,{size:18})," Baixar PDF"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:h,className:"flex items-center justify-center gap-2 py-4 bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-black text-[10px] uppercase tracking-widest border border-slate-100 dark:border-slate-700 hover:bg-slate-100 transition-all",children:[e.jsx(N,{size:14})," Citar"]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 py-4 bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-black text-[10px] uppercase tracking-widest border border-slate-100 dark:border-slate-700 hover:bg-slate-100 transition-all",children:[e.jsx(v,{size:14})," Partilhar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-6 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800/50",children:[e.jsxs("div",{className:"text-center border-r border-slate-200 dark:border-slate-700",children:[e.jsx("span",{className:"block text-2xl font-black text-slate-900 dark:text-white",children:t.views_count}),e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Leituras"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block text-2xl font-black text-slate-900 dark:text-white",children:t.downloads_count}),e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Downloads"})]})]}),e.jsxs("div",{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/10 text-brand-blue rounded-xl h-fit",children:e.jsx(A,{size:18})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Instituição"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:((n=t.institution)==null?void 0:n.name)||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/10 text-amber-600 rounded-xl h-fit",children:e.jsx(_,{size:18})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Geografia"}),e.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[t.province?`${t.province}, `:"",t.country]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/10 text-purple-600 rounded-xl h-fit",children:e.jsx(y,{size:18})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Identificador DOI"}),e.jsx("span",{className:"text-[11px] font-mono font-bold text-brand-blue",children:t.doi_internal})]})]})]})]})})]})]})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-6",children:e.jsx(M,{size:32,className:"text-slate-400"})}),e.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white mb-4",children:"Documento não encontrado"}),e.jsx("button",{onClick:()=>c("/biblioteca"),className:"px-8 py-4 bg-brand-blue text-white rounded-2xl font-black text-xs uppercase tracking-widest",children:"Voltar à Biblioteca"})]})};export{B as default};
