import{V as m,N as h,q as b,u as g,r as i,x as p,t as f,j as e,L as j}from"./main-CzhJzhiQ.js";import{C as k}from"./circle-alert-D0W0SEmX.js";const w=()=>{const[r]=m(),o=h(),{login:d}=b(),{t:x}=g(),[l,n]=i.useState(null);i.useEffect(()=>{const a=r.get("code"),s=r.get("state"),t=window.location.pathname.includes("apple")?"apple":"google";a?u(t,a,s||void 0):n("No authorization code found.")},[]);const u=async(a,s,c)=>{try{const t=await p.exchangeSocialCode(a,s,c);d(t.access,t.refresh,{id:t.user_id,username:t.username,email:t.email||""}),f.success(x("auth.success","Autenticado com sucesso!")),o("/")}catch(t){console.error(t),n("Falha na autenticação social. Tente novamente.")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"text-center space-y-4 p-8 bg-white dark:bg-slate-900 rounded-[32px] shadow-xl border border-slate-100 dark:border-slate-800",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{size:32})}),e.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white",children:"Erro na Autenticação"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-xs mx-auto",children:l}),e.jsx("button",{onClick:()=>o("/"),className:"mt-6 px-6 py-2 bg-slate-100 dark:bg-slate-800 rounded-xl font-bold text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Voltar ao Início"})]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-12 h-12 text-brand-blue animate-spin mx-auto"}),e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white animate-pulse",children:"A finalizar autenticação..."})]})})})};export{w as default};
